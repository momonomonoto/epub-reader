rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    // Public create-only access for feedback. No reads, updates or deletes.
    match /feedback/{docId} {
      allow create: if
        request.resource.data.keys().hasOnly(['name', 'email', 'feedback', 'createdAt']) &&
        request.resource.data.name is string &&
        request.resource.data.email is string &&
        request.resource.data.feedback is string &&
        request.resource.data.name.size() > 0 && request.resource.data.name.size() <= 100 &&
        request.resource.data.email.size() > 3 && request.resource.data.email.size() <= 200 &&
        request.resource.data.feedback.size() > 0 && request.resource.data.feedback.size() <= 5000;

      allow read, update, delete: if false;
    }
  }
}


